---

- import_tasks: dependencies.yaml
  tags: local-service

- name: Ensure group "fahclient" exists
  group:
    name: fahclient
    state: present
    system: true
  when: "ansible_distribution == 'RedHat' or ansible_distribution == 'Fedora' or ansible_distribution == 'Amazon'"

- name: Ensure user "fahclient" exists
  user:
    name: fahclient
    state: present
    group: fahclient
    comment: "Folding@home Client"
    shell: /sbin/nologin
    expires: -1
    system: true
  when: "ansible_distribution == 'RedHat' or ansible_distribution == 'Fedora' or ansible_distribution == 'Amazon'"

- name: Create fahclient directories
  file:
    path: "{{ item }}"
    state: directory
    owner: fahclient
    group: fahclient
    mode: 0775
  with_items:
    - /var/lib/fahclient
    - /etc/fahclient
  when: "ansible_distribution == 'RedHat' or ansible_distribution == 'Fedora' or ansible_distribution == 'Amazon'"

- import_tasks: service.yaml
  tags: local-service

- import_tasks: firewall.yaml
  tags: local-service

- import_tasks: cron.yaml
  tags: local-service
...
